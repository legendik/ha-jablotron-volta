# Jablotron Volta Dashboard
# Pro pou≈æit√≠ v Home Assistantu - Settings > Dashboards > Add Dashboard (YAML)
# Nebo zkop√≠ruj tento YAML do existuj√≠c√≠ho dashboardu

title: Jablotron Volta
views:
  # ============================================================================
  # TAB 1: P≈òEHLED
  # ============================================================================
  - title: P≈ôehled
    path: prehled
    icon: mdi:home-thermometer
    cards:
      # Climate Control
      - type: thermostat
        entity: climate.heating_circuit_1
        name: Kotel Volta

      # Hlavn√≠ teploty
      - type: entities
        title: üå°Ô∏è Teploty
        show_header_toggle: false
        entities:
          - entity: sensor.jablotron_volta_outdoor_temp_composite
            name: Venkovn√≠ teplota (Composite)
            icon: mdi:thermometer
          - entity: sensor.jablotron_volta_outdoor_temp_damped
            name: Venkovn√≠ teplota (Tlumen√°)
            icon: mdi:thermometer-lines
          - entity: sensor.jablotron_volta_boiler_water_input_temp
            name: Teplota vody - vstup
            icon: mdi:water-thermometer
          - entity: sensor.jablotron_volta_boiler_water_return_temp
            name: Teplota vody - vratn√°
            icon: mdi:water-thermometer-outline
          - type: divider
          - entity: sensor.jablotron_volta_ch1_water_setpoint
            name: CH1 - Po≈æadovan√° teplota vody
            icon: mdi:target
          - entity: sensor.jablotron_volta_ch1_temperature_current
            name: CH1 - Aktu√°ln√≠ teplota
            icon: mdi:thermometer

      # Stav kotle
      - type: entities
        title: ‚öôÔ∏è Stav kotle
        show_header_toggle: false
        entities:
          - entity: select.jablotron_volta_regulation_mode
            name: Re≈æim regulace
            icon: mdi:cog
          - entity: binary_sensor.jablotron_volta_ch1_heating
            name: Vyt√°pƒõn√≠ aktivn√≠
            icon: mdi:fire
          - entity: sensor.jablotron_volta_boiler_active_segments
            name: Aktivn√≠ topn√© segmenty
            icon: mdi:heating-coil
          - entity: sensor.jablotron_volta_boiler_pressure
            name: Tlak v syst√©mu
            icon: mdi:gauge
          - entity: sensor.jablotron_volta_cpu_temperature
            name: Teplota CPU
            icon: mdi:chip

      # Grafy teplot
      - type: history-graph
        title: üìà Historie teplot (24h)
        hours_to_show: 24
        refresh_interval: 300
        entities:
          - entity: sensor.jablotron_volta_outdoor_temp_composite
            name: Venkovn√≠ (Composite)
          - entity: sensor.jablotron_volta_boiler_water_input_temp
            name: Voda - vstup
          - entity: sensor.jablotron_volta_ch1_water_setpoint
            name: CH1 Setpoint

  # ============================================================================
  # TAB 2: EKVITERMN√ç REGULACE
  # ============================================================================
  - title: Ekvitermn√≠ k≈ôivka
    path: ekviterm
    icon: mdi:chart-bell-curve
    cards:
      # Aktu√°ln√≠ nastaven√≠
      - type: markdown
        content: |
          ## üìä Ekvitermn√≠ regulace
          
          **Jak to funguje:**
          - Kotel mƒõn√≠ teplotu vody podle venkovn√≠ teploty
          - **Slope** = Jak moc se mƒõn√≠ (sklon k≈ôivky)
          - **Offset** = Posun cel√© k≈ôivky nahoru/dol≈Ø
          - **Composite Ratio** = Mix aktu√°ln√≠ + tlumen√© teploty (0.5 = 50/50)
          
          **Tvoje nastaven√≠ je optimalizovan√© pro podlahov√© topen√≠!**

      # Hlavn√≠ parametry ekvitermu
      - type: entities
        title: ‚öôÔ∏è Nastaven√≠ ekvitermn√≠ k≈ôivky
        show_header_toggle: false
        entities:
          - entity: number.jablotron_volta_ch1_equitherm_slope
            name: Sklon k≈ôivky (Slope)
            icon: mdi:angle-acute
          - entity: number.jablotron_volta_ch1_equitherm_offset
            name: Posun k≈ôivky (Offset)
            icon: mdi:arrow-up-down
          - entity: number.jablotron_volta_composite_filter_ratio
            name: Composite Filter Ratio
            icon: mdi:filter

      # Venkovn√≠ teploty
      - type: entities
        title: üå°Ô∏è Venkovn√≠ teploty
        show_header_toggle: false
        entities:
          - entity: sensor.jablotron_volta_outdoor_temp_composite
            name: Composite (pou≈æito pro ekviterm)
            icon: mdi:thermometer
          - entity: sensor.jablotron_volta_outdoor_temp_damped
            name: Tlumen√°
            icon: mdi:thermometer-lines
          - type: divider
          - entity: number.jablotron_volta_building_momentum
            name: Konstanta setrvaƒçnosti budovy
            icon: mdi:timer-sand

      # V√Ωsledek - teplota vody
      - type: gauge
        entity: sensor.jablotron_volta_ch1_water_setpoint
        name: V√Ωsledn√° teplota vody (CH1)
        min: 20
        max: 60
        severity:
          green: 30
          yellow: 45
          red: 55
        needle: true

      # Graf - ekvitermn√≠ k≈ôivka v akci
      - type: history-graph
        title: üìà Ekvitermn√≠ regulace (48h)
        hours_to_show: 48
        refresh_interval: 300
        entities:
          - entity: sensor.jablotron_volta_outdoor_temp_composite
            name: Venkovn√≠ (Composite)
          - entity: sensor.jablotron_volta_ch1_water_setpoint
            name: Teplota vody
          - entity: sensor.jablotron_volta_ch1_water_input_temp
            name: Voda vstup (skuteƒçn√°)

      # Doporuƒçen√≠
      - type: markdown
        content: |
          ### üí° Tipy pro doladƒõn√≠:
          
          **Je v zimƒõ zima?**
          - ‚ùÑÔ∏è Termostaty po≈ô√°d otev≈ôen√©, teplota nikdy nedos√°hne c√≠le
          - üîß **Zvy≈° Slope** na 0.7 nebo 0.8
          
          **Je v p≈ôechodn√©m obdob√≠ teplo?**
          - üå§Ô∏è Termostaty po≈ô√°d zav≈ôen√©, p≈ôeh≈ô√≠v√°n√≠
          - üîß **Sni≈æ Slope** na 0.5 nebo 0.4
          
          **Celkovƒõ moc/m√°lo top√≠?**
          - üîß Uprav **Offset** (¬±5¬∞C)

  # ============================================================================
  # TAB 3: CH1 TOPN√ù OKRUH
  # ============================================================================
  - title: CH1 Topn√Ω okruh
    path: ch1
    icon: mdi:radiator
    cards:
      # Hlavn√≠ info
      - type: markdown
        content: |
          ## üî• CH1 - Topn√Ω okruh 1
          
          **Re≈æim:** Ekvitermn√≠ regulace  
          **Typ topen√≠:** Podlahov√© topen√≠  
          **Regulace m√≠stnost√≠:** Chytr√© termostaty na hlavic√≠ch

      # Aktu√°ln√≠ stav
      - type: entities
        title: üìä Aktu√°ln√≠ stav
        show_header_toggle: false
        entities:
          - entity: sensor.jablotron_volta_ch1_temperature_current
            name: Aktu√°ln√≠ teplota
            icon: mdi:thermometer
          - entity: sensor.jablotron_volta_ch1_water_setpoint
            name: Po≈æadovan√° teplota vody
            icon: mdi:target
          - entity: sensor.jablotron_volta_ch1_water_input_temp
            name: Teplota vody - vstup
            icon: mdi:water-thermometer
          - entity: sensor.jablotron_volta_ch1_water_return_temp
            name: Teplota vody - vratn√°
            icon: mdi:water-thermometer-outline

      # Nastaven√≠ teplot
      - type: entities
        title: üéØ Nastaven√≠ TUV
        show_header_toggle: false
        entities:
          - entity: number.jablotron_volta_dhw_hysteresis
            name: Hysteresis
            icon: mdi:sine-wave

      # Graf
      - type: history-graph
        title: üìà Historie TUV (24h)
        hours_to_show: 24
        refresh_interval: 300
        entities:
          - entity: sensor.jablotron_volta_dhw_temperature_current
            name: Teplota TUV

      # Gauge
      - type: gauge
        entity: sensor.jablotron_volta_dhw_temperature_current
        name: Teplota TUV
        min: 0
        max: 80
        severity:
          green: 45
          yellow: 35
          red: 70
        needle: true

  # ============================================================================
  # TAB 6: V≈†ECHNA NASTAVEN√ç
  # ============================================================================
  - title: V≈°echna nastaven√≠
    path: nastaveni
    icon: mdi:tune
    cards:
      # Warning
      - type: markdown
        content: |
          ## ‚ö†Ô∏è Pokroƒçil√° nastaven√≠
          
          **Pozor!** Zmƒõna tƒõchto parametr≈Ø m≈Ø≈æe ovlivnit efektivitu a komfort vyt√°pƒõn√≠.
          
          Pokud si nejsi jist√Ω, pou≈æij doporuƒçen√° nastaven√≠ z tabu **CH1 Topn√Ω okruh**.

      # Regulace
      - type: entities
        title: üìê Regulace
        show_header_toggle: false
        entities:
          - entity: number.jablotron_volta_building_momentum
            name: Konstanta setrvaƒçnosti budovy
          - entity: number.jablotron_volta_composite_filter_ratio
            name: Composite Filter Ratio

      # CH1 - V≈°echna nastaven√≠
      - type: entities
        title: üî• CH1 - Kompletn√≠ nastaven√≠
        show_header_toggle: false
        entities:
          - type: section
            label: Teploty
          - entity: number.jablotron_volta_ch1_water_temp_min
            name: Min. teplota
          - entity: number.jablotron_volta_ch1_water_temp_max
            name: Max. teplota
          - entity: number.jablotron_volta_ch1_antifrost_temp
            name: Protimrazov√° teplota
          - type: section
            label: Voda
          - entity: number.jablotron_volta_ch1_water_temp_min
            name: Min. teplota vody
          - entity: number.jablotron_volta_ch1_water_temp_max
            name: Max. teplota vody
          - type: section
            label: Ekvitermn√≠ k≈ôivka
          - entity: number.jablotron_volta_ch1_equitherm_slope
            name: Slope
          - entity: number.jablotron_volta_ch1_equitherm_offset
            name: Offset
          - entity: number.jablotron_volta_ch1_equitherm_room_effect
            name: Room Effect
          - type: section
            label: Pokroƒçil√©
          - entity: number.jablotron_volta_ch1_hysteresis
            name: Hysteresis
          - entity: number.jablotron_volta_ch1_temp_correction
            name: Korekce teploty
          - entity: switch.jablotron_volta_ch1_optimal_start
            name: Optimal Start/Stop

      # Kotel
      - type: entities
        title: üè≠ Kotel
        show_header_toggle: false
        entities:
          - entity: sensor.jablotron_volta_boiler_water_setpoint
            name: Setpoint teploty vody
          - entity: number.jablotron_volta_boiler_water_temp_min
            name: Min. teplota
          - entity: number.jablotron_volta_boiler_water_temp_max
            name: Max. teplota

      # TUV
      - type: entities
        title: üöø TUV
        show_header_toggle: false
        entities:
          - entity: number.jablotron_volta_dhw_hysteresis
            name: Hysteresis

  # ============================================================================
  # TAB 7: DIAGNOSTIKA
  # ============================================================================
  - title: Diagnostika
    path: diagnostika
    icon: mdi:bug
    cards:
      # Info
      - type: markdown
        content: |
          ## üîç Diagnostika a debug
          
          Zde najde≈° podrobn√© informace pro ladƒõn√≠ a diagnostiku syst√©mu.

      # V≈°echny teploty
      - type: entities
        title: üå°Ô∏è V≈°echny teploty
        show_header_toggle: false
        entities:
          - type: section
            label: Venkovn√≠
          - entity: sensor.jablotron_volta_outdoor_temp_composite
            name: Composite (pou≈æito pro ekviterm)
          - entity: sensor.jablotron_volta_outdoor_temp_damped
            name: Tlumen√°
          - type: section
            label: Kotel
          - entity: sensor.jablotron_volta_boiler_water_input_temp
            name: Vstup
          - entity: sensor.jablotron_volta_boiler_water_return_temp
            name: Vratn√°
          - entity: sensor.jablotron_volta_boiler_water_setpoint
            name: Setpoint
          - entity: sensor.jablotron_volta_cpu_temperature
            name: CPU
          - type: section
            label: CH1
          - entity: sensor.jablotron_volta_ch1_temperature_current
            name: Aktu√°ln√≠
          - entity: sensor.jablotron_volta_ch1_water_setpoint
            name: Setpoint vody
          - entity: sensor.jablotron_volta_ch1_water_input_temp
            name: Voda vstup
          - entity: sensor.jablotron_volta_ch1_water_return_temp
            name: Voda vratn√°
          - type: section
            label: TUV
          - entity: sensor.jablotron_volta_dhw_temperature_current
            name: Aktu√°ln√≠

      # Modbus diagnostika
      - type: entities
        title: üîå Modbus
        show_header_toggle: false
        entities:
          - entity: sensor.jablotron_volta_ip_address
            name: IP adresa
            icon: mdi:ip-network

      # Syst√©m
      - type: entities
        title: üíæ Syst√©m
        show_header_toggle: false
        entities:
          - entity: sensor.jablotron_volta_cpu_temperature
            name: Teplota CPU
          - entity: sensor.jablotron_volta_battery_voltage
            name: Baterie
          - entity: sensor.jablotron_volta_boiler_pressure
            name: Tlak
          - entity: sensor.jablotron_volta_boiler_active_segments
            name: Aktivn√≠ segmenty
          - entity: sensor.jablotron_volta_boiler_inactive_segments
            name: Neaktivn√≠ segmenty

      # Multi-graph v≈°ech teplot
      - type: history-graph
        title: üìä V≈°echny teploty (24h)
        hours_to_show: 24
        refresh_interval: 300
        entities:
          - entity: sensor.jablotron_volta_outdoor_temp_composite
            name: Venkovn√≠
          - entity: sensor.jablotron_volta_boiler_water_input_temp
            name: Kotel vstup
          - entity: sensor.jablotron_volta_ch1_water_setpoint
            name: CH1 setpoint
          - entity: sensor.jablotron_volta_ch1_water_input_temp
            name: CH1 vstup
          - entity: sensor.jablotron_volta_dhw_temperature_current
            name: TUV

      # Energie spot≈ôeba (pokud m√°≈°)
      - type: markdown
        content: |
          ### üí° Pro sledov√°n√≠ spot≈ôeby energie:
          
          Pokud chce≈° sledovat spot≈ôebu elekt≈ôiny kotle, p≈ôipoj energetick√Ω mƒõ≈ôiƒç
          (nap≈ô. Shelly EM) a p≈ôidej sem entity pro:
          - Aktu√°ln√≠ p≈ô√≠kon (W)
          - Denn√≠ spot≈ôeba (kWh)
          - Mƒõs√≠ƒçn√≠ spot≈ôeba (kWh)
